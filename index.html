<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Vehicle World</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(120deg,#0f3d2e,#0b5);
height:100vh;
display:flex;
justify-content:center;
align-items:center;
color:#000;
}

.card{
background:white;
width:330px;
padding:25px;
border-radius:16px;
box-shadow:0 0 25px rgba(0,0,0,.3);
text-align:center;
}

input,button{
width:100%;
padding:12px;
margin-top:10px;
border-radius:8px;
border:1px solid #ccc;
font-size:15px;
}

button{
background:#0f3d2e;
color:white;
border:none;
cursor:pointer;
}

.row{
display:flex;
justify-content:space-between;
font-size:14px;
margin-top:10px;
color:#0f3d2e;
cursor:pointer;
}

.hidden{display:none;}

.wallet{
position:fixed;
top:15px;
right:15px;
background:#fff;
padding:8px 14px;
border-radius:12px;
font-weight:bold;
cursor:pointer;
}

.box{
background:#000c;
color:white;
padding:20px;
border-radius:16px;
width:300px;
}

.qr img{width:200px;}

.history{
font-size:14px;
text-align:left;
max-height:150px;
overflow:auto;
}

.show{
display:flex;
align-items:center;
gap:6px;
font-size:14px;
margin-top:4px;
}
</style>
</head>

<body>

<div class="wallet" onclick="openWallet()">₹ <span id="bal">0</span></div>

<!-- LOGIN -->
<div class="card" id="loginBox">
<h2>VEHICLE WORLD</h2>

<input id="lmobile" placeholder="Mobile Number">
<input id="lpass" type="password" placeholder="Password">

<div class="show">
<input type="checkbox" onclick="togglePass('lpass')"> Show password
</div>

<button onclick="login()">Login</button>

<div class="row">
<span onclick="showSignup()">Signup</span>
<span onclick="forgot()">Forgot?</span>
</div>

<p id="lmsg"></p>
</div>

<!-- SIGNUP -->
<div class="card hidden" id="signupBox">
<h2>Create Account</h2>

<input id="smobile" placeholder="Mobile Number">
<input id="spass" type="password" placeholder="Password">
<input id="scpass" type="password" placeholder="Confirm Password">

<button onclick="signup()">Signup</button>
<div class="row">
<span onclick="backLogin()">⬅ Back</span>
</div>

<p id="smsg"></p>
</div>

<!-- WALLET -->
<div class="card hidden" id="walletBox">

<h3>Recharge Wallet</h3>

<div class="qr">
<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=upi://pay?pa=bestinsurance@upi&pn=BestInsurance&cu=INR">
</div>

<p>UPI: bestinsurance@upi</p>

<input id="addAmt" placeholder="Enter amount after payment">

<button onclick="sendRecharge()">Submit Recharge</button>

<h4>History</h4>
<div class="history" id="history"></div>

<button onclick="closeWallet()">Close</button>

</div>

<!-- SERVICE -->
<div class="card hidden" id="serviceBox">

<h3>Enter Vehicle Number</h3>
<input id="vehicle">

<button onclick="useService()">Submit ₹120</button>

<p id="smsg2"></p>

</div>

<script>
let user=null;

function getUsers(){
return JSON.parse(localStorage.getItem("users")||"{}");
}

function saveUsers(u){
localStorage.setItem("users",JSON.stringify(u));
}

function togglePass(id){
let p=document.getElementById(id);
p.type=p.type==="password"?"text":"password";
}

/* SIGNUP */
function signup(){
let m=smobile.value,p=spass.value,c=scpass.value;
if(!m||!p||!c) return smsg.textContent="Fill all fields";
if(p!==c) return smsg.textContent="Passwords not match";

let u=getUsers();
if(u[m]) return smsg.textContent="Already exists";

u[m]={password:p,wallet:0,history:[]};
saveUsers(u);

smobile.value=spass.value=scpass.value="";
smsg.textContent="Signup success! Login now";
}

/* LOGIN */
function login(){
let u=getUsers();
let m=lmobile.value,p=lpass.value;
if(!u[m]) return lmsg.textContent="User not found";
if(u[m].password!==p) return lmsg.textContent="Wrong password";

user=m;
lmobile.value=lpass.value="";
lmsg.textContent="";

loginBox.classList.add("hidden");
serviceBox.classList.remove("hidden");
updateBal();
}

/* FORGOT */
function forgot(){
let u=getUsers();
let m=lmobile.value;
if(!u[m]) alert("Not found");
else alert("Password: "+u[m].password);
}

/* UI */
function showSignup(){
loginBox.classList.add("hidden");
signupBox.classList.remove("hidden");
}
function backLogin(){
signupBox.classList.add("hidden");
loginBox.classList.remove("hidden");
}

/* WALLET */
function openWallet(){
if(!user) return alert("Login first");
walletBox.classList.remove("hidden");
loadHistory();
}
function closeWallet(){
walletBox.classList.add("hidden");
}

function updateBal(){
let u=getUsers();
bal.textContent=u[user].wallet;
}

/* Recharge request */
function sendRecharge(){
let amt=parseInt(addAmt.value);
if(!amt) return alert("Enter amount");

let u=getUsers();
u[user].history.push("Recharge request ₹"+amt+" (pending)");
saveUsers(u);

addAmt.value="";
loadHistory();
alert("Recharge sent for approval");
}

/* Service */
function useService(){
let u=getUsers();
if(u[user].wallet<120){
smsg2.textContent="❗ Insufficient balance";
return;
}

u[user].wallet-=120;
u[user].history.push("RC service used ₹120");
saveUsers(u);

updateBal();
smsg2.textContent="Request sent successfully";
}

/* History */
function loadHistory(){
let u=getUsers();
let h=u[user].history;
history.innerHTML=h.map(x=>"• "+x).reverse().join("<br>");
}
</script>

</body>
</html>