<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>RC PDF Login</title>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<style>
body{
font-family:Arial;
background:#020617;
color:white;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

.box{
background:#020617;
border:2px solid #00ffd5;
padding:28px;
border-radius:18px;
width:330px;
box-shadow:0 0 20px #00ffd5;
text-align:center;
}

input,button{
width:100%;
padding:12px;
margin-top:12px;
border-radius:10px;
border:none;
font-size:16px;
}

button{background:#00ffd5;font-weight:bold}

.link{
margin-top:14px;
color:#00ffd5;
cursor:pointer;
}

.hidden{display:none}
</style>
</head>

<body>

<div class="box" id="loginBox">

<h2>Login</h2>

<input id="loginEmail" placeholder="Gmail">
<input id="loginPass" type="password" placeholder="Password">

<button onclick="login()">Login</button>

<div class="link" onclick="showForget()">Forgot Password?</div>

<p id="loginMsg"></p>
</div>

<div class="box hidden" id="forgetBox">

<h2>Reset Password</h2>

<input id="forgetEmail" placeholder="Registered Email">
<button onclick="sendOTP()">Send OTP</button>

<input id="otpInput" class="hidden" placeholder="Enter OTP">
<button id="verifyBtn" class="hidden" onclick="verifyOTP()">Verify OTP</button>

<input id="newPass" class="hidden" placeholder="New Password">
<button id="submitNew" class="hidden" onclick="setNewPass()">Submit New Password</button>

</div>

<script>
emailjs.init("eRTexjroiPjM9miek");

let users = JSON.parse(localStorage.getItem("users")||"{}");
let otp="", resetEmail="";

function save(){localStorage.setItem("users",JSON.stringify(users));}

function login(){
let e=loginEmail.value,p=loginPass.value;
if(!users[e]||users[e].password!==p){
loginMsg.innerText="Wrong email or password";
return;
}
location.href="index.html";  // RC MAIN PAGE
}

function showForget(){
loginBox.classList.add("hidden");
forgetBox.classList.remove("hidden");
}

function sendOTP(){
let e=forgetEmail.value;
if(!users[e]) return alert("Email not registered");

otp=Math.floor(100000+Math.random()*900000)+"";
resetEmail=e;

emailjs.send("service_h04mrbw","template_g84p4hi",{
email:e,
passcode:otp
});

otpInput.classList.remove("hidden");
verifyBtn.classList.remove("hidden");
}

function verifyOTP(){
if(otpInput.value!==otp) return alert("Wrong OTP");

newPass.classList.remove("hidden");
submitNew.classList.remove("hidden");
}

function setNewPass(){
users[resetEmail].password=newPass.value;
save();
alert("Password updated. Login again.");
location.reload();  // back to login page
}
</script>

</body>
</html>