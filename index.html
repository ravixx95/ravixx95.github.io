<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RC PDF Portal</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(270deg,red,blue,green,purple,cyan);
background-size:600% 600%;
animation:bg 12s infinite alternate;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
min-height:100vh;
}
@keyframes bg{0%{background-position:0%}100%{background-position:100%}}

.card{
background:#000c;
color:white;
padding:25px;
border-radius:18px;
width:92%;
max-width:420px;
text-align:center;
}

input,button{
width:100%;
padding:12px;
margin-top:10px;
border:none;
border-radius:10px;
font-size:16px;
}

button{background:#00ffd5;font-weight:bold;cursor:pointer}

.hidden{display:none}

.home{
position:fixed;
top:12px;
left:12px;
background:white;
color:black;
padding:8px 16px;
border-radius:10px;
font-weight:bold;
cursor:pointer;
z-index:9999;
}

#wallet{
position:fixed;
right:12px;
top:12px;
background:white;
color:black;
padding:10px 14px;
border-radius:12px;
font-weight:bold;
z-index:9999;
}

/* LOGIN OVERLAY */
#loginBox{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,.85);
display:flex;
justify-content:center;
align-items:center;
z-index:10000;
}

.loginCard{
background:white;
padding:30px;
border-radius:14px;
width:320px;
text-align:center;
}

.loginCard h2{margin:0;color:#145a32}
.loginCard input{border:1px solid #ccc}
.loginCard button{background:#145a32;color:white}
.loginLinks{
display:flex;
justify-content:space-between;
font-size:14px;
margin-top:8px;
color:#145a32;
cursor:pointer;
}
</style>
</head>

<body>

<!-- LOGIN SCREEN -->
<div id="loginBox">
  <div class="loginCard">
    <h2>VEHICLE WORLD</h2>
    <input id="lmob" placeholder="Mobile Number">
    <input id="lpass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <div class="loginLinks">
      <span onclick="signup()">Signup</span>
      <span onclick="forgot()">Forgot?</span>
    </div>
    <p id="lmsg"></p>
  </div>
</div>

<div class="home" onclick="goHome()">üè† Home</div>
<div id="wallet">üíº ‚Çπ<span id="bal">0</span></div>

<div class="card">

<div id="p1">
<h3>üöó Enter Vehicle Number</h3>
<input id="vehicle" placeholder="BR-09-AB-1234">
<button onclick="goPay()">Continue</button>
</div>

<div id="p2" class="hidden">
<h3>Wallet Payment ‚Çπ120</h3>

<img src="https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=upi://pay?pa=bestinsurance@upi&pn=BestInsurance&am=120&cu=INR">

<input id="mobile" placeholder="Mobile Number">
<button onclick="submitPay()">Submit</button>
</div>

<div id="p3" class="hidden">
<h3>‚úÖ Payment Successful</h3>
<p>Request sent & wallet deducted</p>
</div>

</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
/* PASTE YOUR FIREBASE CONFIG HERE */
};

firebase.initializeApp(firebaseConfig);
const db=firebase.database();

let currentUser=null;
let walletBalance=0;

function login(){
let m=lmob.value,p=lpass.value;
db.ref("users/"+m).get().then(s=>{
 if(!s.exists()) return lmsg.innerText="User not found";
 if(s.val().password===p){
  currentUser=m;
  localStorage.setItem("user",m);
  loginBox.style.display="none";
  loadWallet();
 } else lmsg.innerText="Wrong password";
});
}

function signup(){
let m=lmob.value,p=lpass.value;
db.ref("users/"+m).get().then(s=>{
 if(s.exists()) lmsg.innerText="Already exists";
 else{
  db.ref("users/"+m).set({password:p,wallet:0});
  lmsg.innerText="Signup done, now login";
 }
});
}

function forgot(){
let m=lmob.value;
db.ref("users/"+m).get().then(s=>{
 if(!s.exists()) lmsg.innerText="No account";
 else lmsg.innerText="Password: "+s.val().password;
});
}

function loadWallet(){
db.ref("users/"+currentUser+"/wallet").on("value",s=>{
 walletBalance=s.val()||0;
 bal.innerText=walletBalance;
});
}

function goHome(){
p2.classList.add("hidden");
p3.classList.add("hidden");
p1.classList.remove("hidden");
}

function goPay(){
if(!vehicle.value.trim()) return alert("Vehicle required");
p1.classList.add("hidden");
p2.classList.remove("hidden");
}

function submitPay(){
if(walletBalance<120) return alert("Wallet balance kam hai");

db.ref("users/"+currentUser+"/wallet").set(walletBalance-120);

fetch(`https://api.telegram.org/bot8138238341:AAFlgSY3OGo5oOfa-IbZ9DxdgrmAeVE525E/sendMessage`,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
chat_id:"5600045707",
text:`üöó RC REQUEST\nVehicle: ${vehicle.value}\nMobile: ${mobile.value}`
})
});

p2.classList.add("hidden");
p3.classList.remove("hidden");
}
</script>

</body>
</html>