<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RC PDF Portal</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(270deg,red,blue,green,purple,cyan);
background-size:600% 600%;
animation:bg 12s infinite alternate;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
min-height:100vh;
}

@keyframes bg{
0%{background-position:0%}
100%{background-position:100%}
}

.home{
position:fixed;
top:12px;
left:12px;
background:white;
color:black;
padding:8px 16px;
border-radius:10px;
font-weight:bold;
cursor:pointer;
z-index:999;
}

.card{
background:#000c;
color:white;
padding:25px;
border-radius:18px;
width:92%;
max-width:420px;
text-align:center;
}

input,button{
width:100%;
padding:12px;
margin-top:10px;
border:none;
border-radius:10px;
font-size:16px;
}

button{
background:#00ffd5;
font-weight:bold;
cursor:pointer;
}

.hidden{display:none;}

img{
width:220px;
border-radius:14px;
margin:12px 0;
}

/* LOGIN OVERLAY */
#authBox{
position:fixed;
top:0;left:0;
width:100%;height:100%;
background:rgba(0,0,0,.88);
display:flex;
align-items:center;
justify-content:center;
z-index:9999;
}

.authCard{
background:white;
color:black;
padding:28px;
width:320px;
border-radius:16px;
text-align:center;
}

.authLinks{
display:flex;
justify-content:space-between;
font-size:14px;
color:#0a58ca;
cursor:pointer;
}

#userName{
position:fixed;
top:12px;
right:12px;
background:white;
padding:6px 12px;
border-radius:10px;
font-weight:bold;
z-index:1000;
display:none;
}

/* LOGOUT */
#logoutBtn{
position:fixed;
top:50px;
right:12px;
background:#ff4d4d;
color:white;
border:none;
padding:6px 14px;
border-radius:10px;
font-weight:bold;
cursor:pointer;
z-index:1000;
display:none;
}

/* SUCCESS POPUP */
#successPopup{
position:fixed;
top:0;left:0;
width:100%;height:100%;
background:rgba(0,0,0,.9);
display:none;
align-items:center;
justify-content:center;
flex-direction:column;
z-index:10000;
color:white;
font-size:22px;
}

.chakra{
width:80px;
height:80px;
border:6px solid #00ffd5;
border-top:6px solid transparent;
border-radius:50%;
animation:spin 1s linear infinite;
margin-bottom:15px;
}

@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="authBox">
<div class="authCard">

<h3 id="authTitle">Login</h3>

<input id="nameField" placeholder="Your Name" style="display:none">
<input id="mobileField" placeholder="Mobile Number">
<input id="passField" type="password" placeholder="Password">

<label style="font-size:14px">
<input type="checkbox" onclick="togglePass()"> Show password
</label>

<button onclick="authAction()">Login</button>

<div class="authLinks">
<span id="signupBtn" onclick="switchSignup()">Signup</span>
<span id="loginBtn" onclick="switchLogin()" style="display:none">Back to Login</span>
</div>

<p id="authMsg"></p>
</div>
</div>

<div id="userName"></div>
<button id="logoutBtn" onclick="logout()">Logout</button>

<div id="successPopup">
<div class="chakra"></div>
<div>‚úÖ Login Successful</div>
</div>

<div class="home" onclick="goHome()">üè† Home</div>

<div class="card">

<div id="p1">
<h3>üöó Enter Vehicle Number üèçÔ∏è</h3>
<input id="vehicle" placeholder="BR-09-AB-1234" maxlength="13" oninput="formatVehicle(this)">
<button onclick="goPay()">Continue</button>
</div>

<div id="p2" class="hidden">
<h3>Pay ‚Çπ120</h3>

<img src="https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=upi://pay?pa=bestinsurance@upi&pn=BestInsurance&am=120&cu=INR">
<p>UPI ID: bestinsurance@upi</p>

<a href="upi://pay?pa=bestinsurance@upi&pn=BestInsurance&am=120&cu=INR">
<button>Pay with UPI App</button>
</a>

<input id="mobile" placeholder="Mobile Number">
<input type="file" id="proof" accept="image/*">

<button onclick="submitPay()">Submit</button>
</div>

<div id="p3" class="hidden">
<h3>‚úÖ Payment Successful</h3>
<p>RC PDF will be sent soon</p>
</div>

</div>

<script>
/* TELEGRAM */
const token="8138238341:AAFlgSY3OGo5oOfa-IbZ9DxdgrmAeVE525E";
const chatId="5600045707";

/* VEHICLE FORMAT */
function formatVehicle(el){
let v = el.value.toUpperCase().replace(/[^A-Z0-9]/g,"");
let out=v.slice(0,2);
if(v.slice(2,4)) out+="-"+v.slice(2,4);
if(v.slice(4,6)) out+="-"+v.slice(4,6);
if(v.slice(6,10)) out+="-"+v.slice(6,10);
el.value=out;
}

/* LOGIN SYSTEM */
let users = JSON.parse(localStorage.getItem("users")||"{}");

function saveUsers(){
localStorage.setItem("users",JSON.stringify(users));
}

function togglePass(){
passField.type = passField.type==="password"?"text":"password";
}

function switchSignup(){
authTitle.innerText="Signup";
nameField.style.display="block";
signupBtn.style.display="none";
loginBtn.style.display="inline";
}

function switchLogin(){
authTitle.innerText="Login";
nameField.style.display="none";
signupBtn.style.display="inline";
loginBtn.style.display="none";
}

function authAction(){
let m=mobileField.value.trim();
let p=passField.value.trim();
let n=nameField.value.trim();

if(authTitle.innerText==="Signup"){
 if(!n||!m||!p) return authMsg.innerText="Fill all fields";
 if(users[m]) return authMsg.innerText="Already registered";

 users[m]={name:n,password:p};
 saveUsers();
 authMsg.innerText="Signup done. Now login.";
 switchLogin();
 return;
}

if(!users[m]) return authMsg.innerText="User not found";
if(users[m].password!==p) return authMsg.innerText="Wrong password";

localStorage.setItem("loggedUser",m);
showUser();

successPopup.style.display="flex";

setTimeout(()=>{
successPopup.style.display="none";
authBox.style.display="none";
},1000);
}

function showUser(){
let m=localStorage.getItem("loggedUser");
if(!m||!users[m]) return;
userName.innerText="üë§ "+users[m].name;
userName.style.display="block";
logoutBtn.style.display="block";
}

function logout(){
localStorage.removeItem("loggedUser");
location.reload();
}

if(localStorage.getItem("loggedUser")){
showUser();
authBox.style.display="none";
}

/* NAV */
function goHome(){
p2.classList.add("hidden");
p3.classList.add("hidden");
p1.classList.remove("hidden");
}

function goPay(){
if(!vehicle.value.trim()) return alert("Vehicle required");
p1.classList.add("hidden");
p2.classList.remove("hidden");
}

/* TELEGRAM SEND */
function submitPay(){
let v=vehicle.value.trim();
let m=mobile.value.trim();
let p=proof.files[0];

if(m.length<10) return alert("Mobile required");
if(!p) return alert("Upload screenshot");

let data=new FormData();
data.append("chat_id",chatId);
data.append("caption",`üöó RC REQUEST\nVehicle: ${v}\nMobile: ${m}`);
data.append("photo",p);

fetch(`https://api.telegram.org/bot${token}/sendPhoto`,{
method:"POST",
body:data
})
.then(()=>{
p2.classList.add("hidden");
p3.classList.remove("hidden");

setTimeout(()=>{
goHome();
vehicle.value="";
mobile.value="";
proof.value="";
},3000);
});
}
</script>

</body>
</html>