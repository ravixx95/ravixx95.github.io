<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Vehicle World</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(120deg,#0f3d2e,#145a32);
height:100vh;
display:flex;
justify-content:center;
align-items:center;
}

/* LOGIN */
#loginBox{
background:#fff;
padding:32px;
width:340px;
border-radius:16px;
box-shadow:0 0 25px rgba(0,0,0,.25);
text-align:center;
}

#loginBox h2{color:#145a32;margin-bottom:10px;}

input{
width:100%;
padding:12px;
margin:10px 0;
border-radius:10px;
border:1px solid #ccc;
font-size:15px;
}

.loginBtn{
background:#145a32;
color:white;
border:none;
padding:12px;
width:100%;
border-radius:10px;
font-size:16px;
cursor:pointer;
}

.links{
display:flex;
justify-content:space-between;
margin-top:12px;
font-size:14px;
color:#145a32;
cursor:pointer;
}

#msg{color:red;font-size:14px;margin-top:8px}

/* MAIN PAGE */
#mainPage{
display:none;
text-align:center;
color:white;
}

.mainCard{
background:#000c;
padding:25px;
border-radius:18px;
width:90%;
max-width:420px;
}

.wallet{
position:fixed;
top:12px;
right:12px;
background:white;
color:black;
padding:10px 14px;
border-radius:12px;
font-weight:bold;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox">
<h2>VEHICLE WORLD</h2>

<input id="mobile" placeholder="Mobile Number">
<input id="pass" type="password" placeholder="Password">

<button class="loginBtn" onclick="login()">Login</button>

<div class="links">
<span onclick="signup()">Signup</span>
<span onclick="forgot()">Forgot Password?</span>
</div>

<p id="msg"></p>
</div>

<!-- MAIN PAGE -->
<div id="mainPage">

<div class="wallet">ðŸ’¼ â‚¹<span id="bal">0</span></div>

<div class="mainCard">
<h3>ðŸš— Enter Vehicle Number</h3>
<input id="vehicle" placeholder="BR-09-AB-1234">
<button class="loginBtn" onclick="submitRC()">Submit (â‚¹120)</button>
<p id="mmsg"></p>
</div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDfj6AmE8EKOWkSDJvTMCBTEdQf7GVv_UI",
  authDomain: "rcpdf-4fdb8.firebaseapp.com",
  databaseURL: "https://rcpdf-4fdb8-default-rtdb.firebaseio.com",
  projectId: "rcpdf-4fdb8",
  storageBucket: "rcpdf-4fdb8.firebasestorage.app",
  messagingSenderId: "98705276911",
  appId: "1:98705276911:web:aa50a8aaa85d514f65401a"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let user=null;
let wallet=0;

/* LOGIN */
function signup(){
 let m=mobile.value.trim(), p=pass.value.trim();
 if(!m||!p) return msg("Fill both fields");

 db.ref("users/"+m).set({password:p,wallet:0});
 msg("Signup done. Now login.");
}

function login(){
 let m=mobile.value.trim(), p=pass.value.trim();

 db.ref("users/"+m).get().then(s=>{
  if(!s.exists()) return msg("User not found");

  if(s.val().password===p){
    user=m;
    wallet=s.val().wallet||0;
    bal.innerText=wallet;

    loginBox.style.display="none";
    mainPage.style.display="block";
  } else msg("Wrong password");
 });
}

function forgot(){
 let m=mobile.value.trim();
 db.ref("users/"+m).get().then(s=>{
  if(!s.exists()) msg("Account not found");
  else msg("Password: "+s.val().password);
 });
}

function msg(t){document.getElementById("msg").innerText=t}

/* MAIN SYSTEM */
function submitRC(){
 if(wallet<120) return mmsg.innerText="Wallet balance kam hai";

 wallet -=120;
 db.ref("users/"+user+"/wallet").set(wallet);
 bal.innerText=wallet;

 mmsg.innerText="Request submitted & â‚¹120 deducted!";
}
</script>

</body>
</html>