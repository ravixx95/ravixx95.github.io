<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RC PDF Portal</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(270deg,red,blue,green,purple,cyan);
background-size:600% 600%;
animation:bg 12s infinite alternate;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
min-height:100vh;
}
@keyframes bg{0%{background-position:0%}100%{background-position:100%}}

.card{
background:#000c;
color:white;
padding:25px;
border-radius:18px;
width:92%;
max-width:420px;
text-align:center;
}

input,button{
width:100%;
padding:12px;
margin-top:10px;
border:none;
border-radius:10px;
font-size:16px;
}

button{background:#00ffd5;font-weight:bold;cursor:pointer}

.hidden{display:none}

#wallet{
position:fixed;
right:12px;
top:12px;
background:white;
color:black;
padding:10px 14px;
border-radius:12px;
font-weight:bold;
z-index:999;
}
</style>
</head>

<body>

<div id="wallet">ðŸ’¼ â‚¹<span id="bal">0</span></div>

<div class="card">

<div id="p1">
<h3>ðŸš— Enter Vehicle Number</h3>
<input id="vehicle" placeholder="BR-09-AB-1234">
<button onclick="goPay()">Continue</button>
</div>

<div id="p2" class="hidden">
<h3>Wallet Payment â‚¹120</h3>

<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=upi://pay?pa=bestinsurance@upi">

<input id="mobile" placeholder="Mobile Number">
<button onclick="submitPay()">Submit</button>
</div>

<div id="p3" class="hidden">
<h3>âœ… Success</h3>
<p>Request sent & wallet deducted</p>
</div>

</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
 /* // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDfj6AmE8EKOWkSDJvTMCBTEdQf7GVv_UI",
  authDomain: "rcpdf-4fdb8.firebaseapp.com",
  databaseURL: "https://rcpdf-4fdb8-default-rtdb.firebaseio.com",
  projectId: "rcpdf-4fdb8",
  storageBucket: "rcpdf-4fdb8.firebasestorage.app",
  messagingSenderId: "98705276911",
  appId: "1:98705276911:web:aa50a8aaa85d514f65401a",
  measurementId: "G-SZWRSDG45N"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app); */
};

firebase.initializeApp(firebaseConfig);
const db=firebase.database();

let user=localStorage.getItem("user") || "demo";
let balance=0;

db.ref("users/"+user+"/wallet").on("value",s=>{
 balance=s.val()||0;
 document.getElementById("bal").innerText=balance;
});

function goPay(){
 if(!vehicle.value.trim()) return alert("Vehicle number required");
 p1.classList.add("hidden");
 p2.classList.remove("hidden");
}

function submitPay(){
 if(balance<120) return alert("Wallet balance kam hai");

 let m=mobile.value.trim();
 if(m.length<10) return alert("Mobile number required");

 db.ref("users/"+user+"/wallet").set(balance-120);

 fetch("https://api.telegram.org/bot8138238341:AAFlgSY3OGo5oOfa-IbZ9DxdgrmAeVE525E/sendMessage",{
 method:"POST",
 headers:{"Content-Type":"application/json"},
 body:JSON.stringify({
 chat_id:"5600045707",
 text:`ðŸš— RC REQUEST\nVehicle: ${vehicle.value}\nMobile: ${m}`
 })
 });

 p2.classList.add("hidden");
 p3.classList.remove("hidden");
}
</script>

</body>
</html>